<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Login</title>

</head>
<body>
<h2>Login</h2>
<form th:action="@{/login}" method="post">
    <label>Email:</label><input type="text" name="username"/><br/>
    <label>Password:</label><input type="password" name="password"/><br/>
    <button type="submit">Login</button>
</form>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$("#loginForm").submit(function(e){
    e.preventDefault();
    const email = $("#email").val();
    const password = $("#password").val();

    $.ajax({
        url: "http://localhost:8080/login", // Your login API
        type: "POST",
        contentType: "application/json",
        data: JSON.stringify({email, password}),
        success: function(response){
            // Store logged-in user email in sessionStorage
            sessionStorage.setItem("loggedInUserEmail", email);

            // Redirect to user dashboard
            window.location.href = "dashboard-user.html";
        },
        error: function(){
            alert("Invalid login");
        }
    });
});
</script>
</body>
</html>